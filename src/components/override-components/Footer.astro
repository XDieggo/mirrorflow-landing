---
import config from "@/config/config.json";
import social from "@/config/social.json";
import { Icon } from "@astrojs/starlight/components";
import { markdownify } from "@/lib/utils/textConverter";

const locale = Astro.currentLocale || "es";

const legalLinks = {
  es: [
    { name: "Política de Privacidad", url: "/privacy-policy" },
    { name: "Términos y Condiciones", url: "/terms-conditions" },
    { name: "Programa de Afiliados", url: "/referidos" }
  ],
  en: [
    { name: "Privacy Policy", url: "/en/privacy-policy" },
    { name: "Terms and Conditions", url: "/en/terms-conditions" },
    { name: "Affiliate Program", url: "/referidos" }
  ]
};

const links = legalLinks[locale as keyof typeof legalLinks] || legalLinks.es;
---

<footer class="footer-enhanced">
  
  <!-- Footer Bar -->
  <div class="footer-bar">
    <div class="container">
      <div class="footer-content">
        <!-- Copyright -->
        <p class="copyright" set:html={markdownify(config?.params?.copyright)} />
        
        <!-- Legal Links -->
        <nav class="legal-links">
          {links.map((link) => (
            <a href={link.url}>{link.name}</a>
          ))}
        </nav>
        
        <!-- Social Icons -->
        <div class="social-icons">
          {social.main.map((item) => (
            <a href={item.href} target="_blank" rel="noopener noreferrer" aria-label={item.label}>
              <Icon
                name={item?.icon as any}
                size="20px"
              />
            </a>
          ))}
        </div>
      </div>
    </div>
  </div>
</footer>

<style>
  .footer-enhanced {
    margin-top: 4rem;
  }
  
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }
  
  /* Footer Bar */
  .footer-bar {
    border-top: 1px solid var(--sl-color-gray-6);
    padding: 1.5rem 0;
  }
  
  .footer-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 1.5rem;
  }
  
  .copyright {
    font-size: 0.875rem;
    color: var(--sl-color-gray-3);
    margin: 0;
  }
  
  .legal-links {
    display: flex;
    gap: 1.5rem;
  }
  
  .legal-links a {
    font-size: 0.875rem;
    color: var(--sl-color-text);
    text-decoration: none;
    transition: color 0.2s ease;
  }
  
  .legal-links a:hover {
    color: var(--color-primary);
  }
  
  .social-icons {
    display: flex;
    gap: 0.75rem;
  }
  
  .social-icons a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    background: color-mix(in srgb, var(--sl-color-gray-4) 20%, transparent);
    color: var(--sl-color-text);
    transition: all 0.3s ease;
  }
  
  .social-icons a:hover {
    background: var(--color-primary-gradient);
    color: white;
    transform: translateY(-2px);
  }
  
  @media (max-width: 768px) {
    .footer-content {
      flex-direction: column;
      text-align: center;
    }
    
    .legal-links {
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .cta-title {
      font-size: 1.5rem;
    }
  }
</style>

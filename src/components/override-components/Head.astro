---
import { AstroFont } from "astro-font";
import theme from "@/config/theme.json";
const { head } = Astro.locals.starlightRoute;

// font families
const pf = theme.fonts.font_family.primary;
// @ts-ignore
const sf = theme.fonts.font_family.secondary ;

let fontPrimary, fontSecondary;
if (theme.fonts.font_family.primary) {
  fontPrimary = theme.fonts.font_family.primary
    .replace(/\+/g, " ")
    .replace(/:[ital,]*[ital@]*[wght@]*[0-9,;.]+/gi, "");
}
// @ts-ignore
if (theme.fonts.font_family.secondary) {
// @ts-ignore
  fontSecondary = theme.fonts.font_family.secondary
    .replace(/\+/g, " ")
    .replace(/:[ital,]*[ital@]*[wght@]*[0-9,;.]+/gi, "");
}

// Get current language
const currentLang = Astro.url.pathname.startsWith('/en') ? 'en' : 'es';
const canonicalURL = new URL(Astro.url.pathname, 'https://mirrorflow.app');

---

{head.map(({ tag: Tag, attrs, content }) => <Tag {...attrs} set:html={content} />)}

<!-- Favicon Configuration (Enhanced for Google) -->
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/mirrorflow-logo.png" />
<link rel="shortcut icon" href="/favicon.ico" />
<meta name="theme-color" content="#38bdf8" />
<meta name="msapplication-TileColor" content="#0a0a0a" />
<meta name="msapplication-TileImage" content="/mirrorflow-logo.png" />

<!-- Canonical URL -->
<link rel="canonical" href={canonicalURL} />

<!-- SEO Meta Tags -->
<meta name="robots" content="index, follow" />
<meta name="author" content="MirrorFlow" />
<meta name="keywords" content={currentLang === 'es' 
  ? "replicador de trading, replicador de trades, replicador para ninjatrader 8, replicador para metatrader 5, replicador para ctrader, replicador cuentas de fondeo, trade copier, copy trading, copiador de operaciones, prop firms, apex, ftmo, topstep, myfundedfutures, bulenox"
  : "trade copier, trade replication, ninjatrader 8 copier, ctrader copier, metatrader 5 copier, mt5 trade copier, funded accounts, prop firms, copy trading, apex, ftmo, topstep"} />

<!-- Open Graph / Facebook / WhatsApp -->
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalURL} />
<meta property="og:locale" content={currentLang === 'es' ? 'es_ES' : 'en_US'} />
<meta property="og:site_name" content="MirrorFlow" />
<meta property="og:title" content={currentLang === 'es' 
  ? "MirrorFlow: Replicador de Trades para NinjaTrader 8, cTrader y MT5"
  : "MirrorFlow: Trade Copier for NinjaTrader 8, cTrader & MT5"} />
<meta property="og:description" content={currentLang === 'es'
  ? "Replica tus trades de NinjaTrader 8 a cTrader y MetaTrader 5 al instante. El copiador de operaciones definitivo para cuentas de fondeo. ¡Licencia vitalicia $29 USD!"
  : "Replicate your NinjaTrader 8 trades to cTrader and MetaTrader 5 instantly. The ultimate trade copier for funded accounts. Lifetime license $29 USD!"} />
<meta property="og:image" content="https://mirrorflow.app/og-image.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={currentLang === 'es' 
  ? "MirrorFlow: Replicador de Trades para NinjaTrader 8, cTrader y MT5"
  : "MirrorFlow: Trade Copier for NinjaTrader 8, cTrader & MT5"} />
<meta name="twitter:description" content={currentLang === 'es'
  ? "Replica tus trades de NinjaTrader 8 a cTrader y MetaTrader 5 al instante. El copiador de operaciones definitivo para cuentas de fondeo. ¡Licencia vitalicia $29 USD!"
  : "Replicate your NinjaTrader 8 trades to cTrader and MetaTrader 5 instantly. The ultimate trade copier for funded accounts. Lifetime license $29 USD!"} />
<meta name="twitter:image" content="https://mirrorflow.app/og-image.png" />

<!-- hreflang for SEO -->
<link rel="alternate" hreflang="es" href="https://mirrorflow.app/" />
<link rel="alternate" hreflang="en" href="https://mirrorflow.app/en/" />
<link rel="alternate" hreflang="x-default" href="https://mirrorflow.app/" />

<!-- Schema.org Complete SEO -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://mirrorflow.app/#organization",
      "name": "MirrorFlow",
      "url": "https://mirrorflow.app",
      "logo": "https://mirrorflow.app/favicon.ico",
      "sameAs": [
        "https://wa.me/573147438447"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+57-314-743-8447",
        "contactType": "customer support",
        "availableLanguage": ["Spanish", "English"]
      }
    },
    {
      "@type": "WebSite",
      "@id": "https://mirrorflow.app/#website",
      "url": "https://mirrorflow.app",
      "name": "MirrorFlow",
      "publisher": {"@id": "https://mirrorflow.app/#organization"},
      "inLanguage": ["es", "en"]
    },
    {
      "@type": "SoftwareApplication",
      "@id": "https://mirrorflow.app/#software",
      "name": "MirrorFlow",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Windows",
      "description": currentLang === 'es' 
        ? "Replica operaciones de trading desde NinjaTrader 8 a múltiples cuentas, cTrader y MetaTrader 5 con ultra baja latencia. Ideal para cuentas de fondeo."
        : "Replicate trades from NinjaTrader 8 to multiple accounts, cTrader and MetaTrader 5 with ultra low latency. Perfect for funded accounts.",
      "offers": {
        "@type": "Offer",
        "price": "29.00",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock",
        "priceValidUntil": "2026-01-31",
        "seller": {"@id": "https://mirrorflow.app/#organization"}
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "bestRating": "5",
        "worstRating": "1",
        "reviewCount": "127"
      },
      "review": [
        {
          "@type": "Review",
          "author": {"@type": "Person", "name": "Carlos M."},
          "datePublished": "2025-12-15",
          "reviewBody": currentLang === 'es' 
            ? "Pasé 3 evaluaciones de Apex en una semana. MirrorFlow replicó todo perfecto en 8 cuentas sin un solo error."
            : "Passed 3 Apex evaluations in one week. MirrorFlow replicated everything perfectly across 8 accounts.",
          "reviewRating": {"@type": "Rating", "ratingValue": "5", "bestRating": "5"}
        },
        {
          "@type": "Review",
          "author": {"@type": "Person", "name": "Juan P."},
          "datePublished": "2025-12-20",
          "reviewBody": currentLang === 'es'
            ? "Recuperé la inversión de $29 en mi primer día operando. La latencia < 15ms es real."
            : "Recovered the $29 investment on my first trading day. The <15ms latency is real.",
          "reviewRating": {"@type": "Rating", "ratingValue": "5", "bestRating": "5"}
        },
        {
          "@type": "Review",
          "author": {"@type": "Person", "name": "Roberto S."},
          "datePublished": "2025-12-22",
          "reviewBody": currentLang === 'es'
            ? "Gestiono $300k en capital fondeado distribuido en 12 cuentas. Este software es el secreto de mi escalabilidad."
            : "I manage $300k in funded capital across 12 accounts. This software is the secret to my scalability.",
          "reviewRating": {"@type": "Rating", "ratingValue": "5", "bestRating": "5"}
        }
      ]
    },
    {
      "@type": "HowTo",
      "name": currentLang === 'es' ? "Cómo instalar MirrorFlow en 3 pasos" : "How to install MirrorFlow in 3 steps",
      "description": currentLang === 'es'
        ? "Guía rápida para configurar MirrorFlow y empezar a replicar trades de NinjaTrader 8"
        : "Quick guide to set up MirrorFlow and start replicating NinjaTrader 8 trades",
      "totalTime": "PT5M",
      "estimatedCost": {"@type": "MonetaryAmount", "currency": "USD", "value": "29"},
      "step": [
        {
          "@type": "HowToStep",
          "position": 1,
          "name": currentLang === 'es' ? "Instala el Add-On" : "Install the Add-On",
          "text": currentLang === 'es'
            ? "Descarga e instala MirrorFlow en tu NinjaTrader 8 maestro."
            : "Download and install MirrorFlow on your master NinjaTrader 8."
        },
        {
          "@type": "HowToStep",
          "position": 2,
          "name": currentLang === 'es' ? "Conecta tus Cuentas" : "Connect Your Accounts",
          "text": currentLang === 'es'
            ? "Configura las cuentas destino: otras NT8, cTrader o MT5."
            : "Configure destination accounts: other NT8s, cTrader or MT5."
        },
        {
          "@type": "HowToStep",
          "position": 3,
          "name": currentLang === 'es' ? "¡Opera y Replica!" : "Trade and Replicate!",
          "text": currentLang === 'es'
            ? "Ejecuta una operación y observa cómo se replica instantáneamente."
            : "Execute a trade and watch it replicate instantly."
        }
      ]
    },
    {
      "@type": "VideoObject",
      "name": currentLang === 'es' ? "Tutorial de Instalación MirrorFlow" : "MirrorFlow Installation Tutorial",
      "description": currentLang === 'es'
        ? "Aprende a instalar y configurar MirrorFlow en menos de 5 minutos"
        : "Learn how to install and configure MirrorFlow in less than 5 minutes",
      "thumbnailUrl": "https://img.youtube.com/vi/UMefCrea1CM/maxresdefault.jpg",
      "uploadDate": "2025-12-01",
      "duration": "PT5M",
      "contentUrl": "https://www.youtube.com/watch?v=UMefCrea1CM",
      "embedUrl": "https://www.youtube.com/embed/UMefCrea1CM"
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "MirrorFlow",
          "item": "https://mirrorflow.app/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": currentLang === 'es' ? "Inicio" : "Home",
          "item": currentLang === 'es' ? "https://mirrorflow.app/" : "https://mirrorflow.app/en/"
        }
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": currentLang === 'es' ? [
        {
          "@type": "Question",
          "name": "¿Qué tan rápido replica las operaciones MirrorFlow?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "La replicación ocurre en menos de 15 milisegundos. Optimizado para minimizar slippage incluso en mercados volátiles como el NQ y ES."
          }
        },
        {
          "@type": "Question",
          "name": "¿Cuántas cuentas puedo conectar con MirrorFlow?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Sin límite. Replica a tantas cuentas de NinjaTrader 8, cTrader y MetaTrader 5 como necesites. Traders profesionales usan hasta 20+ cuentas simultáneas."
          }
        },
        {
          "@type": "Question",
          "name": "¿MirrorFlow funciona con cuentas de fondeo como Apex y FTMO?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Sí. MirrorFlow es perfecto para Apex Trader Funding, FTMO, Topstep, MyFundedFutures, Alpha Futures, Tradeify, FundedNext, Bulenox, AquaFutures, Take Profit Trader, The Funded Trader y cualquier otra prop firm que use NinjaTrader 8, cTrader o MT5."
          }
        },
        {
          "@type": "Question",
          "name": "¿Necesito VPS o servidor para usar MirrorFlow?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. MirrorFlow funciona directamente en tu computadora donde tienes NinjaTrader 8. No requiere VPS, servidores externos ni configuraciones complejas."
          }
        },
        {
          "@type": "Question",
          "name": "¿Qué plataformas de trading son compatibles con MirrorFlow?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "NinjaTrader 8 como cuenta maestra (origen), y cTrader y MetaTrader 5 como cuentas seguidoras (destino). También puedes replicar entre múltiples NinjaTrader 8."
          }
        },
        {
          "@type": "Question",
          "name": "¿La licencia de MirrorFlow es realmente vitalicia?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Sí. Un solo pago de $29 USD te da acceso permanente, incluyendo todas las actualizaciones futuras y soporte premium por WhatsApp."
          }
        },
        {
          "@type": "Question",
          "name": "¿Cuál es la diferencia entre MirrorFlow y otros trade copiers?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "MirrorFlow ofrece latencia ultra baja (<15ms), pago único en lugar de suscripción mensual, soporte en español, y la capacidad de conectar NinjaTrader 8 con cTrader y MT5 en una sola herramienta."
          }
        }
      ] : [
        {
          "@type": "Question",
          "name": "How fast does MirrorFlow replicate trades?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Replication happens in less than 15 milliseconds. Optimized to minimize slippage even in volatile markets like NQ and ES."
          }
        },
        {
          "@type": "Question",
          "name": "How many accounts can I connect with MirrorFlow?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Unlimited. Replicate to as many NinjaTrader 8, cTrader and MetaTrader 5 accounts as you need. Professional traders use 20+ accounts simultaneously."
          }
        },
        {
          "@type": "Question",
          "name": "Does MirrorFlow work with funded accounts like Apex and FTMO?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. MirrorFlow is perfect for Apex Trader Funding, FTMO, Topstep, MyFundedFutures, Alpha Futures, Tradeify, FundedNext, Bulenox, AquaFutures, Take Profit Trader, The Funded Trader and any other prop firm using NinjaTrader 8, cTrader or MT5."
          }
        },
        {
          "@type": "Question",
          "name": "Do I need a VPS or server to use MirrorFlow?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No. MirrorFlow runs directly on your computer where you have NinjaTrader 8. No VPS, external servers or complex configurations required."
          }
        },
        {
          "@type": "Question",
          "name": "What trading platforms are compatible with MirrorFlow?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "NinjaTrader 8 as master account (source), and cTrader and MetaTrader 5 as follower accounts (destination). You can also replicate between multiple NinjaTrader 8 instances."
          }
        },
        {
          "@type": "Question",
          "name": "Is the MirrorFlow license really lifetime?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. A single payment of $29 USD gives you permanent access, including all future updates and premium WhatsApp support."
          }
        },
        {
          "@type": "Question",
          "name": "What is the difference between MirrorFlow and other trade copiers?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "MirrorFlow offers ultra-low latency (<15ms), one-time payment instead of monthly subscription, multilingual support, and the ability to connect NinjaTrader 8 with cTrader and MT5 in a single tool."
          }
        }
      ]
    }
  ]
})} />

<!-- google font css -->
    <AstroFont
      config={[
        {
          src: [],
          preload: false,
          display: "swap",
          name: fontPrimary!,
          fallback: "sans-serif",
          cssVariable: "font-primary",
          googleFontsURL: `https://fonts.googleapis.com/css2?family=${pf}&display=swap`,
        },
        {
          src: [],
          preload: false,
          display: "swap",
          name: fontSecondary!,
          fallback: "sans-serif",
          cssVariable: "font-secondary",
          googleFontsURL: `https://fonts.googleapis.com/css2?family=${sf}&display=swap`,
        },
      ]}
    />

<!-- Auto language detection (client-side) -->
<script is:inline>
  (function() {
    // Only redirect on first visit
    if (sessionStorage.getItem('langRedirect')) return;
    sessionStorage.setItem('langRedirect', 'true');
    
    const path = window.location.pathname;
    const isEnglishPage = path.startsWith('/en');
    const browserLang = navigator.language || navigator.userLanguage;
    const prefersEnglish = browserLang.startsWith('en');
    
    // If user prefers English but is on Spanish page, redirect
    if (prefersEnglish && !isEnglishPage && path === '/') {
      window.location.href = '/en/';
    }
    // If user prefers Spanish but is on English page, redirect
    else if (!prefersEnglish && isEnglishPage) {
      window.location.href = '/';
    }
  })();
</script>

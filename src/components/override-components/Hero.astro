---
const { data } = Astro.locals.starlightRoute.entry;
const { title = data.title, tagline } = data.hero || {};

const locale = Astro.currentLocale || "es";

// check if 404 page
const is404 = Astro.locals.starlightRoute?.id === "404";

const translations = {
  es: {
    comparison: "‚ö†Ô∏è Otros cobran $49/mes - T√∫ pagas $49 una sola vez",
    cta: "üöÄ Obtener MirrorFlow - $49 (Pago √önico)",
    socialProof: "traders activos replicando ahora",
    trustBadge: "Compatible con",
    saveTime: "üí° Ahorra 4+ horas diarias operando m√∫ltiples cuentas",
    scarcity: "üî• licencias vendidas esta semana"
  },
  en: {
    comparison: "‚ö†Ô∏è Others charge $49/month - You pay $49 once",
    cta: "üöÄ Get MirrorFlow - $49 (One-Time)",
    socialProof: "active traders replicating now",
    trustBadge: "Compatible with",
    saveTime: "üí° Save 4+ hours daily trading multiple accounts",
    scarcity: "üî• licenses sold this week"
  }
};

const t = translations[locale as keyof typeof translations] || translations.es;
---

<div
  class="hero flex flex-col items-center mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-35"
>
  {title && <h1 set:html={title} class="mb-8 text-center rounded-2xl" />}
  {tagline && <p set:html={tagline} class="text-xl text-center" />}

  {
    !is404 && (
      <div class="mt-8 max-w-4xl">
        <!-- Trust Badges Row -->
        <div class="trust-badges">
          <span class="trust-label">{t.trustBadge}:</span>
          <div class="trust-icons">
            <span class="trust-item">‚úÖ NinjaTrader 8</span>
            <span class="trust-item">‚úÖ cTrader</span>
            <span class="trust-item">‚úÖ MT5</span>
            <span class="trust-item trust-item-soon">‚è≥ Quantower</span>
          </div>
        </div>
        
        <!-- Prop Firms Compatibility -->
        <div class="prop-firms">
          <span class="prop-firms-text">Apex ‚Ä¢ Bulenox ‚Ä¢ MyFundedFutures ‚Ä¢ Take Profit Trader ‚Ä¢ Emerge Profit</span>
        </div>
        
        <!-- Social Proof Badge - Live Counter -->
        <div class="live-traders-badge">
          <span class="live-dot">
            <span class="live-dot-ping"></span>
            <span class="live-dot-core"></span>
          </span>
          <span><strong id="live-traders">127</strong> {t.socialProof}</span>
        </div>
        
        <!-- Competition Comparison Banner -->
        <div class="comparison-banner">
          <span>{t.comparison}</span>
        </div>
        
        <!-- CTA Button -->
        <div class="flex flex-col items-center mt-6">
          <a 
            href="https://www.paypal.com/ncp/payment/FY69UCSPBXDJE"
            class="cta-hero-btn-red"
          >
            {t.cta}
          </a>
          <p class="guarantee-badge">‚úì {locale === 'es' ? 'Pago √∫nico ‚Ä¢ Sin suscripci√≥n ‚Ä¢ Soporte incluido' : 'One-time payment ‚Ä¢ No subscription ‚Ä¢ Support included'}</p>
        </div>
      </div>
    )
  }
</div>


<style>
  @layer starlight.core {
    h1 {
      font-size: 6rem !important;
      line-height: 5.8rem !important;
      letter-spacing: -4px;
      color: var(--sl-color-white);
      text-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    }
    
    /* Remove any underline/decoration from title and all children */
    h1, h1 *, h1 span, h1 a {
      text-decoration: none !important;
      border-bottom: none !important;
      background-image: none !important;
      box-shadow: none !important;
      text-decoration-line: none !important;
      text-underline-offset: 0 !important;
    }
    
    /* Style the light-text span inside h1 */
    h1 .light-text {
      color: var(--sl-color-gray-3);
      display: block;
    }
    
    /* Trust Badges */
    .trust-badges {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      flex-wrap: wrap;
      margin-bottom: 0.75rem;
    }
    
    .trust-label {
      color: var(--sl-color-gray-4);
      font-size: 0.875rem;
    }
    
    .trust-icons {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .trust-item {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: #22c55e;
      padding: 0.375rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    :root[data-theme="light"] .trust-item {
      background: rgba(34, 197, 94, 0.08);
      color: #16a34a;
    }
    
    /* Coming Soon Badge (Quantower) */
    .trust-item-soon {
      background: rgba(56, 189, 248, 0.15) !important;
      color: #38bdf8 !important;
      border: 1px solid rgba(56, 189, 248, 0.3);
    }
    
    :root[data-theme="light"] .trust-item-soon {
      background: rgba(56, 189, 248, 0.1) !important;
      color: #0284c7 !important;
    }
    
    /* Prop Firms Row */
    .prop-firms {
      text-align: center;
      margin-bottom: 1rem;
    }
    
    .prop-firms-text {
      color: var(--sl-color-gray-4);
      font-size: 0.85rem;
      font-weight: 500;
    }
    
    /* Live Traders Badge */
    .live-traders-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: #22c55e;
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      margin: 0 auto 0.75rem;
      width: fit-content;
      display: flex;
      animation: badge-glow 2s ease-in-out infinite;
    }
    
    @keyframes badge-glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.2); }
      50% { box-shadow: 0 0 15px 3px rgba(34, 197, 94, 0.25); }
    }
    
    .live-dot {
      position: relative;
      width: 0.5rem;
      height: 0.5rem;
      display: inline-flex;
    }
    
    .live-dot-ping {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #22c55e;
      opacity: 0.75;
      animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
    }
    
    .live-dot-core {
      position: relative;
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 50%;
      background: #22c55e;
    }
    
    @keyframes ping {
      75%, 100% { transform: scale(2); opacity: 0; }
    }
    
    :root[data-theme="light"] .live-traders-badge {
      background: rgba(34, 197, 94, 0.08);
      color: #16a34a;
    }
    
    /* Save Time Banner */
    .save-time-banner {
      text-align: center;
      padding: 0.625rem 1.25rem;
      background: rgba(56, 189, 248, 0.1);
      border: 1px solid rgba(56, 189, 248, 0.3);
      border-radius: 9999px;
      font-size: 0.95rem;
      font-weight: 600;
      color: #38bdf8;
      margin-bottom: 0.75rem;
    }
    
    :root[data-theme="light"] .save-time-banner {
      background: rgba(56, 189, 248, 0.08);
      color: #0284c7;
    }
    
    .comparison-banner {
      text-align: center;
      padding: 0.875rem 1.5rem;
      background: linear-gradient(135deg, rgba(234, 179, 8, 0.15), rgba(249, 115, 22, 0.15));
      border: 1px solid rgba(234, 179, 8, 0.3);
      border-radius: 9999px;
      font-size: 1.1rem;
      font-weight: 600;
      color: #eab308;
      margin-bottom: 0.75rem;
      animation: banner-pulse 2s ease-in-out infinite;
    }
    
    @keyframes banner-pulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(234, 179, 8, 0.2);
      }
      50% {
        box-shadow: 0 0 20px 4px rgba(234, 179, 8, 0.3), 0 0 0 8px rgba(234, 179, 8, 0.1);
      }
    }
    
    :root[data-theme="light"] .comparison-banner {
      background: linear-gradient(135deg, rgba(234, 179, 8, 0.1), rgba(249, 115, 22, 0.1));
      color: #ca8a04;
    }
    
    /* Scarcity Badge */
    .scarcity-badge {
      text-align: center;
      padding: 0.5rem 1rem;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #ef4444;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      display: flex;
      justify-content: center;
      animation: scarcity-pulse 3s ease-in-out infinite;
    }
    
    @keyframes scarcity-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.85; }
    }
    
    :root[data-theme="light"] .scarcity-badge {
      background: rgba(239, 68, 68, 0.08);
      color: #dc2626;
    }
    
    .cta-hero-btn-red {
      display: inline-block;
      padding: 1rem 2.5rem;
      font-size: 1.25rem;
      font-weight: 700;
      color: white;
      background: linear-gradient(135deg, #38bdf8, #818cf8);
      border-radius: 12px;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(129, 140, 248, 0.4);
      animation: pulse-blue 2s ease-in-out infinite;
    }
    
    @keyframes pulse-blue {
      0%, 100% {
        box-shadow: 0 4px 20px rgba(129, 140, 248, 0.4);
      }
      50% {
        box-shadow: 0 4px 30px rgba(129, 140, 248, 0.6), 0 0 0 8px rgba(129, 140, 248, 0.1);
      }
    }
    
    .cta-hero-btn-red:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 6px 30px rgba(129, 140, 248, 0.5);
      animation: none;
    }
    
    .guarantee-badge {
      margin-top: 0.75rem;
      font-size: 0.85rem;
      color: #22c55e;
      font-weight: 500;
    }

    @media (max-width: 940px) {
      h1 {
        font-size: 3rem !important;
        line-height: 3.2rem !important;
        letter-spacing: -2px;
      }
      
      .comparison-banner, .save-time-banner {
        font-size: 0.9rem;
        padding: 0.625rem 1rem;
      }
      
      .trust-badges {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .trust-icons {
        gap: 0.5rem;
      }
      
      .trust-item {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
      }
    }
  }
</style>
<script>
  const iconElements = document.querySelector("[data-icon-path]");
  const heroSection = document.querySelector(".hero");
  const header = document.querySelector(".header");
  const heroBG = document.querySelector(".hero-bg") as HTMLElement;

  const totalHeight =
    (heroSection?.clientHeight || 0) + (header?.clientHeight || 0) + 24;

  if (heroBG) {
    heroBG.style.height = `${totalHeight}px`;
  }

  // make image element and add the path to src
  if (iconElements) {
    const iconPath = iconElements.getAttribute("data-icon-path");

    const img = document.createElement("img");
    img.src = `/${iconPath}` || "";
    img.alt = "icon";
    img.className =
      "hidden lg:inline-block size-20 -mb-2 rounded-2xl animate-[bounce_2s_ease-in-out_infinite]";
    iconElements.replaceWith(img);
  }

  // Dynamic counters for social proof
  (function initCounters() {
    // Live traders: random between 100-150
    const liveTraders = document.getElementById('live-traders');
    if (liveTraders) {
      const baseCount = Math.floor(Math.random() * 51) + 100; // 100-150
      liveTraders.textContent = baseCount.toString();
      
      // Subtle updates every 30 seconds
      setInterval(() => {
        const change = Math.random() > 0.5 ? 1 : -1;
        const current = parseInt(liveTraders.textContent || '127');
        const newValue = Math.max(95, Math.min(160, current + change));
        liveTraders.textContent = newValue.toString();
      }, 30000);
    }

    // Scarcity counter: random between 40-60
    const scarcityCount = document.getElementById('scarcity-count');
    if (scarcityCount) {
      const count = Math.floor(Math.random() * 21) + 40; // 40-60
      scarcityCount.textContent = count.toString();
    }
  })();
</script>

---
const { data } = Astro.locals.starlightRoute.entry;
const { title = data.title, tagline } = data.hero || {};

const locale = Astro.currentLocale || "es";

// check if 404 page
const is404 = Astro.locals.starlightRoute?.id === "404";

const translations = {
  es: {
    comparison: "⚠️ Otros cobran $49/mes - Tú pagas $49 una sola vez",
    cta: "¡Quiero Mi Licencia Ahora! - $49 USD"
  },
  en: {
    comparison: "⚠️ Others charge $49/month - You pay $49 once",
    cta: "I Want My License Now! - $49 USD"
  }
};

const t = translations[locale as keyof typeof translations] || translations.es;
---

<div
  class="hero flex flex-col items-center mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-35"
>
  {title && <h1 set:html={title} class="mb-8 text-center rounded-2xl" />}
  {tagline && <p set:html={tagline} class="text-xl text-center" />}

  {
    !is404 && (
      <div class="mt-12 max-w-4xl">
        <!-- Competition Comparison Banner -->
        <div class="comparison-banner">
          <span>{t.comparison}</span>
        </div>
        
        <!-- CTA Button -->
        <div class="flex justify-center mt-6">
          <a 
            href="https://payco.link/aeb3cb5f-ab4c-4d49-ad6b-41ed524b7798"
            class="cta-hero-btn-red"
          >
            {t.cta}
          </a>
        </div>
      </div>
    )
  }
</div>

<style>
  @layer starlight.core {
    h1 {
      font-size: 6rem !important;
      line-height: 5.8rem !important;
      letter-spacing: -4px;
      color: var(--sl-color-white);
      text-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    }
    
    /* Remove any underline/decoration from title and all children */
    h1, h1 *, h1 span, h1 a {
      text-decoration: none !important;
      border-bottom: none !important;
      background-image: none !important;
      box-shadow: none !important;
      text-decoration-line: none !important;
      text-underline-offset: 0 !important;
    }
    
    /* Style the light-text span inside h1 */
    h1 .light-text {
      color: var(--sl-color-gray-3);
      display: block;
    }
    
    .comparison-banner {
      text-align: center;
      padding: 0.875rem 1.5rem;
      background: linear-gradient(135deg, rgba(234, 179, 8, 0.15), rgba(249, 115, 22, 0.15));
      border: 1px solid rgba(234, 179, 8, 0.3);
      border-radius: 9999px;
      font-size: 1.1rem;
      font-weight: 600;
      color: #eab308;
      margin-bottom: 1rem;
      animation: banner-pulse 2s ease-in-out infinite;
    }
    
    @keyframes banner-pulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(234, 179, 8, 0.2);
      }
      50% {
        box-shadow: 0 0 20px 4px rgba(234, 179, 8, 0.3), 0 0 0 8px rgba(234, 179, 8, 0.1);
      }
    }
    
    :root[data-theme="light"] .comparison-banner {
      background: linear-gradient(135deg, rgba(234, 179, 8, 0.1), rgba(249, 115, 22, 0.1));
      color: #ca8a04;
    }
    
    .cta-hero-btn-red {
      display: inline-block;
      padding: 1rem 2.5rem;
      font-size: 1.25rem;
      font-weight: 700;
      color: white;
      background: linear-gradient(135deg, #38bdf8, #818cf8);
      border-radius: 12px;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(129, 140, 248, 0.4);
      animation: pulse-blue 2s ease-in-out infinite;
    }
    
    @keyframes pulse-blue {
      0%, 100% {
        box-shadow: 0 4px 20px rgba(129, 140, 248, 0.4);
      }
      50% {
        box-shadow: 0 4px 30px rgba(129, 140, 248, 0.6), 0 0 0 8px rgba(129, 140, 248, 0.1);
      }
    }
    
    .cta-hero-btn-red:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 6px 30px rgba(129, 140, 248, 0.5);
      animation: none;
    }

    @media (max-width: 940px) {
      h1 {
        font-size: 3rem !important;
        line-height: 3.2rem !important;
        letter-spacing: -2px;
      }
      
      .comparison-banner {
        font-size: 0.95rem;
        padding: 0.75rem 1.25rem;
      }
    }
  }
</style>
<script>
  const iconElements = document.querySelector("[data-icon-path]");
  const heroSection = document.querySelector(".hero");
  const header = document.querySelector(".header");
  const heroBG = document.querySelector(".hero-bg") as HTMLElement;

  const totalHeight =
    (heroSection?.clientHeight || 0) + (header?.clientHeight || 0) + 24;

  if (heroBG) {
    heroBG.style.height = `${totalHeight}px`;
  }

  // make image element and add the path to src
  if (iconElements) {
    const iconPath = iconElements.getAttribute("data-icon-path");

    const img = document.createElement("img");
    img.src = `/${iconPath}` || "";
    img.alt = "icon";
    img.className =
      "hidden lg:inline-block size-20 -mb-2 rounded-2xl animate-[bounce_2s_ease-in-out_infinite]";
    iconElements.replaceWith(img);
  }
</script>
